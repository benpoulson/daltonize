"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function n(t,i){let e=0;for(let a=0;a<t.length;a++)e+=t[a]*i[a];return e}function p(t){let i=t[0][0],e=t[0][1],a=t[0][2],u=t[1][0],r=t[1][1],b=t[1][2],c=t[2][0],d=t[2][1],h=t[2][2],M=h*r-b*d,f=-h*u+b*c,g=d*u-r*c,s=i*M+e*f+a*g;return s=1/s,[[M*s,(-h*e+a*d)*s,(b*e-a*r)*s],[f*s,(h*i-a*c)*s,(-b*i+a*u)*s],[g*s,(-d*i+e*c)*s,(r*i-e*u)*s]]}const l=[[17.8824,43.5161,4.11935],[3.45565,27.1554,3.86714],[.0299566,.184309,1.46709]],m=[[[0,2.02344,-2.52581],[0,1,0],[0,0,1]],[[1,0,0],[.494207,0,1.24827],[0,0,1]],[[1,0,0],[0,1,0],[-.395913,.801109,0]]],o=[[0,0,0],[.7,1,0],[.7,0,1]];function k(t,i){const e=[n(t,l[0]),n(t,l[1]),n(t,l[2])];let a=[0,0,0];switch(i){case"protanope":a=[n(e,m[0][0]),n(e,m[0][1]),n(e,m[0][2])];break;case"deuteranope":a=[n(e,m[1][0]),n(e,m[1][1]),n(e,m[1][2])];break;case"tritanope":a=[n(e,m[2][0]),n(e,m[2][1]),n(e,m[2][2])];break;default:return t}const u=p(l);let r=[n(a,u[0]),n(a,u[1]),n(a,u[2])];r=[t[0]-r[0],t[1]-r[1],t[2]-r[2]];const b=[n(r,o[0]),n(r,o[1]),n(r,o[2])];return[Math.min(Math.max(t[0]+b[0]|0,0),255),Math.min(Math.max(t[1]+b[1]|0,0),255),Math.min(Math.max(t[2]+b[2]|0,0),255)]}exports.daltonize=k;
